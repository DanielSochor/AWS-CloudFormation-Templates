"MyRepository":{
    "Type":"AWS::ECR::Repository",
    "Properties":{
      "RepositoryName":{
        "Ref":"AWS::StackName"
      },
      "RepositoryPolicyText":{
        "Version":"2008-10-17",
        "Statement":[
          {
            "Sid":"AllowPushPull",
            "Effect":"Allow",
            "Principal":{
              "AWS":[
                {
                  "Fn::Join":[
                    "",
                    [
                      "arn:aws:iam::",
                      {
                        "Ref":"AWS::AccountId"
                      },
                      ":user/",
                      {
                        "Ref":"IAMUsername"
                      }
                    ]
                  ]
                }
              ]
            },
            "Action":[
              "ecr:GetDownloadUrlForLayer",
              "ecr:BatchGetImage",
              "ecr:BatchCheckLayerAvailability",
              "ecr:PutImage",
              "ecr:InitiateLayerUpload",
              "ecr:UploadLayerPart",
              "ecr:CompleteLayerUpload"
            ]
          }
        ]
      }
    }
  }